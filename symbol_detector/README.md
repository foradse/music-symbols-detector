# Symbol Detector - Извлечение музыкальных символов

## Описание задачи

Группа из 2 человек отвечает за извлечение отдельных музыкальных символов из нотных линеек. После того как Staff Detection группа разделит изображение на нотные линейки, ваша задача - найти и извлечь каждый символ как отдельное изображение.

## Основные функции для реализации

### 1. `remove_staff_lines(staff_image)`
**Задача:** Удалить нотные линии из изображения, чтобы выделить символы
- Вход: изображение нотной линейки
- Выход: изображение без нотных линий
- Методы: морфологические операции, фильтрация

### 2. `find_symbol_contours(image, min_area=50, max_area=5000)`
**Задача:** Найти контуры всех символов на изображении
- Вход: изображение без нотных линий
- Выход: список контуров символов
- Методы: findContours, фильтрация по размеру

### 3. `extract_symbols(staff_image)`
**Задача:** Основная функция извлечения символов
- Вход: изображение нотной линейки
- Выход: список кортежей (изображение_символа, bbox)
- Процесс: удаление линий → поиск контуров → обрезка символов

### 4. `crop_symbol_region(staff_image, bbox, padding=5)`
**Задача:** Обрезать область символа с отступами
- Вход: изображение линейки, координаты области, отступ
- Выход: обрезанное изображение символа

### 5. `resize_symbol_image(symbol_image, target_size=(64, 64))`
**Задача:** Изменить размер символа для классификации
- Вход: изображение символа, целевой размер
- Выход: измененное изображение

## Технологии

- **OpenCV** - основная библиотека для обработки изображений
- **NumPy** - работа с массивами
- **Morphological operations** - удаление линий
- **Contour detection** - поиск символов

## Критерии успеха

1. **Точность извлечения:** Все символы должны быть найдены без пропусков
2. **Качество обрезки:** Символы должны быть обрезаны с небольшими отступами
3. **Размер:** Все символы должны быть приведены к размеру 64x64 пикселей
4. **Производительность:** Обработка одной нотной линейки не более 1 секунды

## Примеры символов для извлечения

- Ноты (целые, половинные, четвертные)
- Паузы (целые, половинные, четвертные, восьмые)
- Ключи (скрипичный, басовый, альтовый)
- Знаки альтерации (диез, бемоль, бекар)
- Размеры тактов (4/4, 3/4, 2/4)
- Точки, лиги, ферматы

## Взаимодействие с другими группами

- **Вход:** Получает нотные линейки от Staff Detection группы
- **Выход:** Передает извлеченные символы в Classifier группу
- **Формат данных:** Список изображений символов с координатами

## Структура файлов

```
symbol_detector/
├── extract_symbols.py    # Основной модуль извлечения
└── README.md             # Этот файл
```

## Полезные ресурсы

- [OpenCV Contour Detection](https://docs.opencv.org/4.x/d4/d73/tutorial_py_contours_begin.html)
- [OpenCV Morphological Operations](https://docs.opencv.org/4.x/d9/d61/tutorial_py_morphological_ops.html)
- [Music Notation Symbols](https://en.wikipedia.org/wiki/List_of_musical_symbols)

## Контакты для помощи

При возникновении вопросов обращайтесь к **Adlan**.

## Дополнительные задачи

1. **Фильтрация шума:** Удаление мелких артефактов
2. **Группировка связанных символов:** Объединение нот с хвостиками
3. **Определение порядка символов:** Сортировка по позиции слева направо
4. **Валидация символов:** Проверка качества извлечения 